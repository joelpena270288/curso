(self["webpackChunktraining"]=self["webpackChunktraining"]||[]).push([[155],{3855:(e,s,a)=>{"use strict";a.d(s,{Z:()=>d});var t=a(52),r=a.n(t),o=a(2599),n=a.n(o);const l="api/auth/",d={setUserLogged(e){n().set("userLogged",e)},getUserLogged(){return n().get("userLogged")},register(e,s){const a={username:e,password:s};return r().post(l+"regiser",a)},login(e,s){const a={username:e,password:s};return r().post(l+"signin",a)},deleteUserLogged(){n().remove("userLogged")}}},7155:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});a(7280),a(5363);var t=a(3673),r=a(8880);const o=(0,t.HX)("data-v-634f0d3a");(0,t.dD)("data-v-634f0d3a");const n={class:"column q-pa-lg"},l={class:"row"},d=(0,t.Wm)("h4",{class:"text-h5 text-white q-my-md"},"Sign In ",-1),i={class:"absolute-bottom-right q-pr-md",style:{transform:"translateY(50%)"}},u=(0,t.Wm)("p",{class:"text-grey-6"},"Forgot your password?",-1);(0,t.Cn)();const m=o(((e,s,a,m,p,c)=>{const g=(0,t.up)("q-btn"),h=(0,t.up)("q-card-section"),w=(0,t.up)("q-icon"),f=(0,t.up)("q-input"),q=(0,t.up)("q-form"),W=(0,t.up)("q-card-actions"),b=(0,t.up)("q-card"),v=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(v,{class:"window-height window-width row justify-center items-center"},{default:o((()=>[(0,t.Wm)("div",n,[(0,t.Wm)("div",l,[(0,t.Wm)(b,{square:"",class:"shadow-24",style:{width:"300px",height:"500px"}},{default:o((()=>[(0,t.Wm)(h,{class:"bg-deep-purple-7"},{default:o((()=>[d,(0,t.Wm)("div",i,[(0,t.Wm)(g,{fab:"",icon:"add",color:"blue-4",onClick:s[1]||(s[1]=s=>e.$router.replace("/signup"))})])])),_:1}),(0,t.Wm)(h,null,{default:o((()=>[(0,t.Wm)(q,{class:"q-px-sm q-pt-xl",onSubmit:(0,r.iM)(c.login,["prevent"])},{default:o((()=>[(0,t.Wm)(f,{square:"",clearable:"",modelValue:p.username,"onUpdate:modelValue":s[2]||(s[2]=e=>p.username=e),type:"email",label:"Username"},{prepend:o((()=>[(0,t.Wm)(w,{name:"person"})])),_:1},8,["modelValue"]),(0,t.Wm)(f,{square:"",clearable:"",modelValue:p.password,"onUpdate:modelValue":s[3]||(s[3]=e=>p.password=e),type:"password",label:"Password"},{prepend:o((()=>[(0,t.Wm)(w,{name:"lock"})])),_:1},8,["modelValue"])])),_:1},8,["onSubmit"])])),_:1}),(0,t.Wm)(W,{class:"q-px-lg"},{default:o((()=>[(0,t.Wm)(g,{unelevated:"",size:"lg",color:"blue-4",class:"full-width text-white",label:"Sign In",onClick:s[4]||(s[4]=e=>c.login())})])),_:1}),(0,t.Wm)(h,{class:"text-center q-pa-sm"},{default:o((()=>[u])),_:1})])),_:1})])])])),_:1})}));a(5474),a(4434);var p=a(3824),c=a.n(p),g=a(3855);const h={name:"Login",methods:{auth(e){this.$hello(e).login({scope:"friends"}).then((()=>{this.$router.push("profile")}))},async login(){try{const e=await g.Z.login(this.username,this.password);if(e){let s=0,a=c().read(e.data.token);a.claim.roles,g.Z.setUserLogged(e.data.token);for(let e=0;e<a.claim.roles.length;e++)"ADMIN"===a.claim.roles[e]&&s++;s>0?this.$router.push("/Administracion"):this.$router.push("/")}}catch(e){"INACTIVE"===e.response.data.message?this.$router.push({path:"/Codigo/"+this.username,params:{username:this.username}}):this.$q.notify({type:"negative",message:e.response.data.message})}}},data(){return{email:"",username:"",password:""}}};var w=a(4379),f=a(151),q=a(5589),W=a(2165),b=a(5269),v=a(4842),y=a(4554),Z=a(9367),_=a(7518),x=a.n(_);h.render=m,h.__scopeId="data-v-634f0d3a";const C=h;x()(h,"components",{QPage:w.Z,QCard:f.Z,QCardSection:q.Z,QBtn:W.Z,QForm:b.Z,QInput:v.Z,QIcon:y.Z,QCardActions:Z.Z})}}]);